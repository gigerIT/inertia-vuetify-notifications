"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const b=require("@inertiajs/vue3"),e=require("vue"),p=require("vuetify/components");function g(i){return"name"in i&&typeof i.name=="string"}function N(i){return"url"in i&&"method"in i}const h=Symbol("inertia-vuetify-notifications"),m={flashKeys:["success","error","warning","info","notification"],defaults:{timeout:5e3,closable:!0,location:"bottom"},actions:{},colorMap:{success:"success",error:"error",warning:"warning",info:"info"}};function w(i={}){const r={...m,...i,defaults:{...m.defaults,...i.defaults},colorMap:{...m.colorMap,...i.colorMap},actions:{...i.actions}},s=e.reactive([]),c=new Map;for(const[t,o]of Object.entries(r.actions))c.set(t,o);function a(t,o){if(typeof t=="string")return{text:t,color:o?r.colorMap[o]:void 0,timeout:r.defaults.timeout,closable:r.defaults.closable};const f=t.type?r.colorMap[t.type]||t.type:o?r.colorMap[o]:void 0;return{text:t.message,color:f,timeout:t.timeout??r.defaults.timeout,closable:t.closable??r.defaults.closable,actions:t.actions}}function u(t,o){const f=a(t,o);s.push(f)}function l(t,o){c.set(t,o)}function d(t){c.delete(t)}async function n(t){if(g(t)){const o=c.get(t.name);o?await o(t.payload):console.warn(`[inertia-vuetify-notifications] No handler registered for action: ${t.name}`)}else if(N(t)){const o=t.method.toLowerCase();b.router.visit(t.url,{method:o,data:t.data})}}return{queue:s,notify:u,registerAction:l,unregisterAction:d,executeAction:n,options:r}}function k(){const i=e.inject(h);if(!i)throw new Error("[inertia-vuetify-notifications] useNotifications() must be used within a component tree that has the notification plugin installed. Did you forget to call app.use(inertiaVuetifyNotifications())?");return i}function x(i={}){return{install(r){const s=w(i);r.provide(h,s),b.router.on("flash",c=>{const a=c.detail.flash;if(!(!a||typeof a!="object"))for(const u of s.options.flashKeys){const l=a[u];l!=null&&s.notify(l,u)}})}}}const C=e.defineComponent({__name:"NotificationProvider",setup(i){const{queue:r,executeAction:s,options:c}=k();function a(n){return typeof n=="object"&&n!==null&&"actions"in n&&Array.isArray(n.actions)&&n.actions.length>0}function u(n){return n.label}async function l(n){await s(n)}function d(n){return typeof n=="string"?!0:typeof n=="object"&&n!==null&&"closable"in n?n.closable!==!1:!0}return(n,t)=>(e.openBlock(),e.createBlock(e.unref(p.VSnackbarQueue),{modelValue:e.unref(r),"onUpdate:modelValue":t[0]||(t[0]=o=>e.isRef(r)?r.value=o:null),location:e.unref(c).defaults.location,closable:e.unref(c).defaults.closable,timeout:e.unref(c).defaults.timeout},{actions:e.withCtx(({item:o,props:f})=>[a(o)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(o.actions,(y,A)=>(e.openBlock(),e.createBlock(e.unref(p.VBtn),{key:A,variant:"text",size:"small",onClick:V=>l(y)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u(y)),1)]),_:2},1032,["onClick"]))),128)):e.createCommentVNode("",!0),d(o)?(e.openBlock(),e.createBlock(e.unref(p.VBtn),e.normalizeProps(e.mergeProps({key:1},f)),null,16)):e.createCommentVNode("",!0)]),_:1},8,["modelValue","location","closable","timeout"]))}});exports.NotificationProvider=C;exports.inertiaVuetifyNotifications=x;exports.isNamedAction=g;exports.isUrlAction=N;exports.useNotifications=k;
